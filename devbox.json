{
  "packages": {
    "process-compose": "latest",
    "act":             "latest",
    "shellcheck":      "latest"
  },
  "shell": {
    "scripts": {
      "lint": [
        "shellcheck -S warning devbox/plugins/*/scripts/*.sh"
      ],
      "lint:android": [
        "shellcheck -S warning devbox/plugins/android/scripts/*.sh"
      ],
      "lint:ios": [
        "shellcheck -S warning devbox/plugins/ios/scripts/*.sh"
      ],
      "lint:rn": [
        "shellcheck -S warning devbox/plugins/react-native/scripts/*.sh"
      ],
      "test:android:lib": [
        "bash devbox/plugins/tests/android/test-lib.sh"
      ],
      "test:android:devices": [
        "bash devbox/plugins/tests/android/test-devices.sh"
      ],
      "test:android": [
        "devbox run lint:android",
        "devbox run test:android:lib",
        "devbox run test:android:devices"
      ],
      "test:ios:lib": [
        "sh devbox/plugins/tests/ios/test-lib.sh"
      ],
      "test:ios": [
        "devbox run lint:ios",
        "devbox run test:ios:lib"
      ],
      "test:rn": [
        "devbox run lint:rn"
      ],
      "test:unit": [
        "devbox run test:android",
        "devbox run test:ios",
        "devbox run test:rn"
      ],
      "test:e2e:android": [
        "bash devbox/tests/e2e-android.sh"
      ],
      "test:e2e:ios": [
        "bash devbox/tests/e2e-ios.sh"
      ],
      "test:e2e:rn": [
        "bash devbox/tests/e2e-react-native.sh"
      ],
      "test:e2e": [
        "bash devbox/tests/e2e-sequential.sh"
      ],
      "test:e2e:parallel": [
        "bash devbox/tests/e2e-all.sh"
      ],
      "test": [
        "echo '========================================'",
        "echo 'Running all plugin tests'",
        "echo '========================================'",
        "echo ''",
        "devbox run lint",
        "echo ''",
        "devbox run test:unit",
        "echo ''",
        "echo '========================================'",
        "echo '✓ All tests passed!'",
        "echo '========================================'",
        "echo ''",
        "echo 'Run \"devbox run test:e2e\" for E2E tests'"
      ],
      "check:workflows": [
        "for f in .github/workflows/*.yml; do",
        "  act -W \"$f\" -l > /dev/null 2>&1 || { echo \"✗ $f\"; exit 1; }",
        "  echo \"✓ $(basename $f)\"",
        "done"
      ],
      "sync": [
        "echo 'Syncing example projects with latest plugins...'",
        "echo ''",
        "echo '1/3 Android...'",
        "(cd devbox/examples/android && rm -rf .devbox devbox.d devbox.lock && devbox install)",
        "echo '    Generating device lock file...'",
        "(cd devbox/examples/android && devbox run android.sh devices eval > /dev/null)",
        "echo '  ✓ Android synced'",
        "echo ''",
        "echo '2/3 iOS...'",
        "(cd devbox/examples/ios && rm -rf .devbox devbox.d devbox.lock && devbox install)",
        "echo '    Generating device lock file...'",
        "(cd devbox/examples/ios && devbox run ios.sh devices eval > /dev/null)",
        "echo '  ✓ iOS synced'",
        "echo ''",
        "echo '3/3 React Native...'",
        "(cd devbox/examples/react-native && rm -rf .devbox devbox.d devbox.lock && devbox install)",
        "echo '    Generating Android lock file...'",
        "(cd devbox/examples/react-native && devbox run android.sh devices eval > /dev/null)",
        "echo '    Generating iOS lock file...'",
        "(cd devbox/examples/react-native && devbox run ios.sh devices eval > /dev/null)",
        "echo '  ✓ React Native synced'",
        "echo ''",
        "echo '✓ All examples synced successfully!'"
      ]
    }
  }
}
