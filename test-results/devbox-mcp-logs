{"level":"info","process":"test-server","replica":0,"message":"Testing devbox-mcp server..."}
{"level":"info","process":"test-server","replica":0,"message":"✓ Server file exists"}
{"level":"info","process":"test-server","replica":0,"message":"✓ package.json exists"}
{"level":"info","process":"test-server","replica":0,"message":"✓ package.json has correct name"}
{"level":"info","process":"test-server","replica":0,"message":"✓ package.json has MCP SDK dependency"}
{"level":"info","process":"test-server","replica":0,"message":"✓ plugin.json exists"}
{"level":"info","process":"test-server","replica":0,"message":"✓ plugin.json has correct name"}
{"level":"info","process":"test-server","replica":0,"message":"✓ plugin.json includes process-compose"}
{"level":"info","process":"test-server","replica":0,"message":"✓ process-compose.yaml exists"}
{"level":"info","process":"test-server","replica":0,"message":"✓ process-compose.yaml defines mcp-server process"}
{"level":"info","process":"test-server","replica":0,"message":"Validating Node.js syntax..."}
{"level":"info","process":"test-server","replica":0,"message":"✓ Server JavaScript syntax is valid"}
{"level":"info","process":"test-server","replica":0,"message":"Checking required tools are defined..."}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_run"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_list"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_add"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_info"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_search"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_docs_search"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_docs_list"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Tool defined: devbox_docs_read"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Server imports MCP SDK"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Server imports StdioServerTransport"}
{"level":"info","process":"test-server","replica":0,"message":"✓ Server has error handling"}
{"level":"info","process":"test-server","replica":0}
{"level":"info","process":"test-server","replica":0,"message":"===================================="}
{"level":"info","process":"test-server","replica":0,"message":"Test Results:"}
{"level":"info","process":"test-server","replica":0,"message":"  Passed: 21"}
{"level":"info","process":"test-server","replica":0,"message":"  Failed: 0"}
{"level":"info","process":"test-server","replica":0,"message":"===================================="}
{"level":"info","process":"test-tools","replica":0,"message":"Testing devbox-mcp tools..."}
{"level":"info","process":"test-tools","replica":0,"message":"Testing server startup (5 second timeout)..."}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Server starts successfully"}
{"level":"info","process":"test-tools","replica":0,"message":"Checking tool schemas..."}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_run tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_run has command parameter"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_list tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_add tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_add has packages parameter"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_info tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_search tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_docs_search tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_docs_search has maxResults parameter"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_docs_list tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_docs_read tool defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ devbox_docs_read has filePath parameter"}
{"level":"info","process":"test-tools","replica":0,"message":"Checking helper functions..."}
{"level":"info","process":"test-tools","replica":0,"message":"✓ runDevbox helper function defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ ensureDocsRepo helper function defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ searchDocs helper function defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ listDocs helper function defined"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ readDoc helper function defined"}
{"level":"info","process":"test-tools","replica":0,"message":"Checking tool handlers..."}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_run"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_list"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_add"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_info"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_search"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_docs_search"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_docs_list"}
{"level":"info","process":"test-tools","replica":0,"message":"✓ Handler exists for devbox_docs_read"}
{"level":"info","process":"test-tools","replica":0}
{"level":"info","process":"test-tools","replica":0,"message":"===================================="}
{"level":"info","process":"test-tools","replica":0,"message":"Test Results:"}
{"level":"info","process":"test-tools","replica":0,"message":"  Passed: 26"}
{"level":"info","process":"test-tools","replica":0,"message":"  Failed: 0"}
{"level":"info","process":"test-tools","replica":0,"message":"===================================="}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Testing MCP tools functionality..."}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test directory: /var/folders/4k/82wjl0fd5zvgtwh3hbcrh3rm0000gn/T/devbox-mcp-test-1770757871646"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 1: devbox init"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_init - Created devbox.json"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 2: devbox add"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_add - Added hello package"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 3: devbox list"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_list - Listed packages including hello"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 4: devbox info"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_info - Retrieved package info"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 5: devbox search"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_search - Searched for packages"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 6: devbox run"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_run - Executed hello command"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 7: devbox shell env"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_shell_env - Retrieved environment variables"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 8: docs search (cloning repo, may take 30s)"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_docs_search - Searched documentation"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 9: docs list"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_docs_list - Listed 174 documentation files"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test 10: docs read"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"✓ devbox_docs_read - Read .vale/styles/write-good/README.md"}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Cleaning up..."}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"===================================="}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"Test Results:"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"  Passed: 10"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"  Failed: 0"}
{"level":"info","process":"test-mcp-tools","replica":0,"message":"===================================="}
{"level":"info","process":"test-mcp-tools","replica":0}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"========================================"}
{"level":"info","process":"summary","replica":0,"message":"     TEST SUITE SUMMARY"}
{"level":"info","process":"summary","replica":0,"message":"========================================"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"\u001b[1mAndroid Plugin Tests:\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0;32m✓\u001b[0m lib.sh: 20 tests passed"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0;32m✓\u001b[0m devices.sh: 12 tests passed"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"\u001b[1miOS Plugin Tests:\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0;32m✓\u001b[0m lib.sh: 8 tests passed"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0;32m✓\u001b[0m devices.sh: 15 tests passed"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"\u001b[1mIntegration Tests:\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0m⚠ android device mgmt: no results found\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0m⚠ android validation: no results found\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0m⚠ ios device mgmt: no results found\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0m⚠ ios cache: no results found\u001b[0m"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"========================================"}
{"level":"info","process":"summary","replica":0,"message":"\u001b[0;32m\u001b[1m     ALL TESTS PASSED ✓\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"========================================"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"Results:"}
{"level":"info","process":"summary","replica":0,"message":"  Test Suites: 2"}
{"level":"info","process":"summary","replica":0,"message":"  \u001b[0;32mPassed: 55\u001b[0m"}
{"level":"info","process":"summary","replica":0,"message":"  Failed: 0"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"Test Log Files:"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/android-test-lib.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/android-test-devices.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/android-test-device-mgmt.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/android-test-validation.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/ios-test-lib.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/ios-test-devices.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/ios-test-device-mgmt.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/ios-test-cache.txt"}
{"level":"info","process":"summary","replica":0,"message":"  reports/logs/summary.txt"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"Lint Logs:"}
{"level":"info","process":"summary","replica":0,"message":"  reports/devbox-lint-logs/"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"Result Files:"}
{"level":"info","process":"summary","replica":0,"message":"  reports/results/*.json"}
{"level":"info","process":"summary","replica":0}
{"level":"info","process":"summary","replica":0,"message":"Summary written to: reports/summary.md"}
{"level":"info","process":"summary","replica":0}
